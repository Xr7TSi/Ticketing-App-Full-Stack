(this["webpackJsonpcrm-frontend"]=this["webpackJsonpcrm-frontend"]||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),s=a.n(c),l=(a(74),a(4)),o=a.n(l),i=a(9),u=(a(76),a(10)),m=a(13),d=a(8),p=a(113),E=a(114),g=a(64),f=a(115),h=a(120),b=a(116),v=a(117),k=a(21),w=Object(k.b)({name:"login",initialState:{isLoading:!1,isAuth:!1,error:""},reducers:{loginPending:function(e){e.isLoading=!0},loginSuccess:function(e){e.isLoading=!1,e.isAuth=!0},loginFail:function(e,t){var a=t.payload;e.isLoading=!1,e.error=a}}}),x=w.reducer,y=w.actions,j=y.loginPending,S=y.loginSuccess,O=y.loginFail,L=x,T=a(7),N=a(16),C=a.n(N),P=function(e){return new Promise(function(){var t=Object(i.a)(o.a.mark((function t(a,n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.post("/v1/user",e);case 3:"success"===(r=t.sent).data.status&&a(r.data),a(r.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n("Error at userRegistration / "+t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}())},A=function(e){return new Promise(function(){var t=Object(i.a)(o.a.mark((function t(a,n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.patch("/v1/user/verify",e);case 3:"success"===(r=t.sent).data.status&&a(r.data),a(r.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n("Error at userRegistrationVerification / "+t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}())},R=function(e){return new Promise(function(){var t=Object(i.a)(o.a.mark((function t(a,n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.post("/v1/user/login",e);case 3:"success"===(r=t.sent).data.status&&(sessionStorage.setItem("accessJWT",r.data.accessJWT),localStorage.setItem("crmSite",JSON.stringify({refreshJWT:r.data.refreshJWT}))),a(r.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n("Error at userLogin / "+t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}())},F=Object(k.b)({name:"user",initialState:{user:{},isLoading:!1,error:""},reducers:{getUserPending:function(e){e.isLoading=!0},getUserSuccess:function(e,t){var a=t.payload;e.isLoading=!1,e.user=a,e.error=""},getUserFailure:function(e,t){var a=t.payload;e.isLoading=!1,e.error=a}}}),I=F.reducer,J=F.actions,D=J.getUserPending,U=J.getUserSuccess,W=J.getUserFailure,B=I,q=function(){return function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(D()),e.next=4,new Promise(function(){var e=Object(i.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=sessionStorage.getItem("accessJWT"))||a("No accessJWT in sessionStorage"),e.next=5,C.a.get("/v1/user",{headers:{Authorization:n}});case 5:r=e.sent,t(r.data),t(r.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a("Error at getUser / "+e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}());case 4:if(!(a=e.sent).user||!a.user._id){e.next=7;break}return e.abrupt("return",t(U(a.user)));case 7:t(W("User not found.")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t(W(e.t0));case 14:case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},G=function(e){var t=e.formSwitcher,a=Object(n.useState)(""),c=Object(d.a)(a,2),s=c[0],l=c[1],m=Object(n.useState)(""),k=Object(d.a)(m,2),w=k[0],x=k[1],y=Object(T.b)(),L=Object(T.c)((function(e){return e.login})),N=L.isLoading,C=L.isAuth,P=L.error,A=Object(u.t)();Object(n.useEffect)((function(){sessionStorage.getItem("accessJWT")&&A("/dashboard")}),[A,C]);var F=function(e){var t=e.target,a=t.name,n=t.value;switch(a){case"email":l(n);break;case"password":x(n)}},I=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s){e.next=3;break}return e.abrupt("return",alert("Please enter your email address."));case 3:return y(j()),e.prev=4,e.next=7,R({email:s,password:w});case 7:if("error"!==(a=e.sent).status){e.next=10;break}return e.abrupt("return",y(O(a.message)));case 10:y(S()),y(q()),A("/dashboard"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),y(O(e.t0));case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(p.a,null,r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement("h1",{className:"text-primary"},"Login"),r.a.createElement("hr",null),P&&r.a.createElement(f.a,{variant:"danger"},P),r.a.createElement(h.a,{autoComplete:"off",onSubmit:I},r.a.createElement(h.a.Group,null,r.a.createElement(h.a.Label,null,"Email address"),r.a.createElement(h.a.Control,{type:"email",name:"email",value:s,onChange:F,placeholder:"Enter email",required:!0})),r.a.createElement(h.a.Group,{style:{marginTop:"10px"}},r.a.createElement(h.a.Label,null,"Password"),r.a.createElement(h.a.Control,{type:"password",name:"password",value:w,onChange:F,placeholder:"Enter Password",required:!0})),r.a.createElement("div",{className:"text-center"},r.a.createElement(b.a,{style:{marginTop:"18px"},type:"submit"},"Login")),N&&r.a.createElement(v.a,{variant:"primary",animation:"border"})),r.a.createElement("hr",null))),r.a.createElement(E.a,null,r.a.createElement(g.a,{className:"text-center"},r.a.createElement("a",{href:"/password-reset"},"Forgot Password?"))),r.a.createElement(E.a,null,r.a.createElement(g.a,{className:"py-4 text-center"},"First time here? "," ",r.a.createElement("a",{href:"/registration",onClick:function(){return t("reset")}},"Sign Up"))))},_=Object(k.b)({name:"passwordReset",initialState:{isLoading:!1,status:"",message:"",showUpdatePasswordForm:!1,email:""},reducers:{otpReqPending:function(e){e.isLoading=!0},otpReqSuccess:function(e,t){var a=t.payload;e.isLoading=!1,e.status="success",e.message=a.message,e.email=a.email,e.showUpdatePasswordForm=!0},updatePasswordSuccess:function(e,t){var a=t.payload;e.isLoading=!1,e.status="success",e.message=a.message},otpReqFailure:function(e,t){var a=t.payload;e.isLoading=!1,e.status="error",e.message=a.message}}}),M=_.reducer,z=_.actions,Z=z.otpReqPending,$=z.otpReqSuccess,H=z.updatePasswordSuccess,V=z.otpReqFailure,Y=M,K=function(e){return new Promise(function(){var t=Object(i.a)(o.a.mark((function t(a,n){var r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.post("/v1/user/reset-password",{email:e});case 3:r=t.sent,c=r.data,a(c),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),n(t.t0),console.log("Error at reqPasswordOtp / "+t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}())},Q=function(e){return new Promise(function(){var t=Object(i.a)(o.a.mark((function t(a,n){var r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.patch("/v1/user/reset-password",e);case 3:r=t.sent,c=r.data,a(c),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),n(t.t0),console.log("Error at updateUserPassword / "+t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}())},X=function(){var e=Object(T.b)(),t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],s=a[1],l=Object(T.c)((function(e){return e.password})),u=l.isLoading,m=l.status,k=l.message;return r.a.createElement(p.a,null,r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement("h1",{className:"text-primary"},"Reset Password"),r.a.createElement("hr",null),k&&r.a.createElement(f.a,{variant:"success"===m?"success":"danger"},k),u&&r.a.createElement(v.a,{variant:"primary",animation:"border"}),r.a.createElement(h.a,{autoComplete:"off",onSubmit:function(t){t.preventDefault(),e(function(e){return function(){var t=Object(i.a)(o.a.mark((function t(a){var n,r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(Z()),t.next=4,K(e);case 4:if(n=t.sent,r=n.status,c=n.message,"success"!==r){t.next=9;break}return t.abrupt("return",a($({message:c,email:e})));case 9:a(V(c)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log("Error at sendPasswordResetOtp / "+t.t0),a(V(t.t0.message));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}(c))}},r.a.createElement(h.a.Group,null,r.a.createElement(h.a.Label,null,"Email address"),r.a.createElement(h.a.Control,{type:"email",name:"email",value:c,onChange:function(e){var t=e.target.value;s(t)},placeholder:"Enter email",required:!0})),r.a.createElement("div",{className:"text-center"},r.a.createElement(b.a,{style:{marginTop:"18px"},type:"submit"},"Reset Password"))))),r.a.createElement(E.a,null))},ee=(a(102),{jumbotron:{backgroundColor:"white",paddingTop:"4rem",paddingBottom:"4rem",paddingLeft:"2rem",paddingRight:"2rem",borderRadius:"0.5rem",boxShadow:"0px 0px 15px -7px black"}}),te=function(){var e=Object(n.useState)("login"),t=Object(d.a)(e,2),a=t[0],c=t[1],s=function(e){c(e)};return"login"===a?r.a.createElement("div",{className:"entry-page bg-dark"},r.a.createElement("div",{style:ee.jumbotron},r.a.createElement(G,{formSwitcher:s}))):"reset"===a?r.a.createElement("div",{className:"entry-page bg-dark"},r.a.createElement("div",{style:ee.jumbotron},r.a.createElement(X,{handleOnResetSubmit:function(e){e.preventDefault()},formSwitcher:s}))):void 0},ae=a(11),ne=a(1),re={pin:"",password:"",confirmPassword:""},ce={isLongEnough:!1,hasUpperCase:!1,hasLowerCase:!1,hasNumber:!1,hasSpecial:!1,confirmPassword:!1},se=function(){var e=Object(T.b)(),t=Object(n.useState)(re),a=Object(d.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(ce),u=Object(d.a)(l,2),m=u[0],k=u[1],w=Object(T.c)((function(e){return e.password})),x=w.isLoading,y=w.status,j=w.message,S=w.email;Object(n.useEffect)((function(){}),[c]);var O=function(e){var t=e.target,a=t.name,n=t.value;if(s(Object(ne.a)(Object(ne.a)({},c),{},Object(ae.a)({},a,n))),"password"===a){var r=n.length>=8,l=/[A-Z]/.test(n),o=/[a-z]/.test(n),i=/[0-9]/.test(n),u=/[ !,",#,$,%,&,',(,),*,+,-,.,/,:,;,<,=,>,?,@,[,^,_,`,{,|,} ]/.test(n);k(Object(ne.a)(Object(ne.a)({},m),{},{isLongEnough:r,hasUpperCase:l,hasLowerCase:o,hasNumber:i,hasSpecial:u}))}"confirmPassword"===a&&k(Object(ne.a)(Object(ne.a)({},m),{},{confirmPassword:c.password===n}))};return r.a.createElement(p.a,null,r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement("h1",{className:"text-primary"},"Password Update"))),r.a.createElement("hr",null),r.a.createElement(E.a,null,r.a.createElement(g.a,null,j&&r.a.createElement(f.a,{variant:"success"===y?"success":"danger"},j),x&&r.a.createElement(v.a,{variant:"primary",animation:"border"}))),r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement(h.a,{onSubmit:function(t){t.preventDefault();var a,n=c.pin,r=c.password;e((a={pin:n,newPassword:r,email:S},function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(Z()),e.next=4,Q(a);case 4:"success"===(n=e.sent).status?t(H(n.message)):t(V(n.message)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error at updatePassword / "+e.t0),t(V(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))}},r.a.createElement(h.a.Group,{className:"mb-3"},r.a.createElement(h.a.Label,null,"PIN"),r.a.createElement(h.a.Control,{type:"number",name:"pin",value:c.pin,onChange:O,placeholder:"pin"})),r.a.createElement(h.a.Group,{className:"mb-3"},r.a.createElement(h.a.Label,null,"New Password"),r.a.createElement(h.a.Control,{type:"password",name:"password",value:c.password,onChange:O,placeholder:"Password"})),r.a.createElement(h.a.Group,{className:"mb-3"},r.a.createElement(h.a.Label,null,"Confirm New Password"),r.a.createElement(h.a.Control,{type:"password",name:"confirmPassword",value:c.confirmPassword,onChange:O,placeholder:"Confirm Password"})),r.a.createElement("ul",{className:"mb-4"},r.a.createElement("li",{className:m.isLongEnough?"text-success":"text-danger"},"At least 8 characters ","",m.isLongEnough?r.a.createElement(r.a.Fragment,null,"\u2713"):""),r.a.createElement("li",{className:m.hasUpperCase?"text-success":"text-danger"},"At least one upper case letter ","",m.hasUpperCase?r.a.createElement(r.a.Fragment,null,"\u2713"):""),r.a.createElement("li",{className:m.hasLowerCase?"text-success":"text-danger"},"At least one lower case letter ","",m.hasLowerCase?r.a.createElement(r.a.Fragment,null,"\u2713"):""),r.a.createElement("li",{className:m.hasNumber?"text-success":"text-danger"},"At least one number ","",m.hasNumber?r.a.createElement(r.a.Fragment,null,"\u2713"):""),r.a.createElement("li",{className:m.hasSpecial?"text-success":"text-danger"},"At least one special character ","",m.hasSpecial?r.a.createElement(r.a.Fragment,null,"\u2713"):""),r.a.createElement("li",{className:m.confirmPassword?"text-success":"text-danger"},"Passwords match ","",m.confirmPassword?r.a.createElement(r.a.Fragment,null,"\u2713"):"")),r.a.createElement("div",{className:"text-center"},r.a.createElement(b.a,{variant:"primary",type:"submit",disabled:Object.values(m).includes(!1)},"Submit"))))),r.a.createElement(E.a,{className:"py-3"},r.a.createElement(g.a,{className:"text-center"},r.a.createElement("a",{href:"/"},"Login"))))},le=(a(103),{jumbotron:{backgroundColor:"white",paddingTop:"4rem",paddingBottom:"4rem",paddingLeft:"2rem",paddingRight:"2rem",borderRadius:"0.5rem",boxShadow:"0px 0px 15px -7px black"}}),oe=function(){var e=Object(T.c)((function(e){return e.password})).showUpdatePasswordForm;return r.a.createElement("div",{className:"entry-page bg-dark"},r.a.createElement("div",{style:le.jumbotron},e?r.a.createElement(se,null):r.a.createElement(X,null)))},ie=a(118),ue=function(){var e=Object(T.c)((function(e){return e.tickets})),t=e.searchTicketList,a=e.tickets,n=e.isLoading,c=e.error,s=t.slice(0,5);return n?r.a.createElement("h3",null,"Loading..."):c?r.a.createElement("h3",null,c):r.a.createElement(ie.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Subject"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Opened Date"),r.a.createElement("th",null,"Ticket ID"),r.a.createElement("th",null,"Opened By"))),r.a.createElement("tbody",null,a.length?s.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement(m.Link,{to:"/ticket/".concat(e._id)},e.subject)),r.a.createElement("td",null,e.status),r.a.createElement("td",null,e.openedAt&&new Date(e.openedAt).toLocaleString()),r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.conversations[0].sender))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4",className:"text-center"},"No Tickets Exist"))))},me=a(122),de=a(67),pe=function(e){var t=e.page;return r.a.createElement(me.a,null,r.a.createElement(de.LinkContainer,{to:"/"},r.a.createElement(me.a.Item,null,"Home")),r.a.createElement(me.a.Item,{active:!0},t))},Ee=Object(k.b)({name:"ticketList",initialState:{tickets:[],isLoading:!1,error:"",replyTicketError:"",searchTicketList:[],selectedTicket:{}},reducers:{fetchTicketLoading:function(e){e.isLoading=!0},fetchTicketSuccess:function(e,t){e.tickets=t.payload,e.searchTicketList=t.payload,e.isLoading=!1},fetchTicketFailure:function(e,t){e.isLoading=!1,e.error=t.payload},resetReplyMsg:function(e){e.isLoading=!1,e.replyMsg=""},searchTicketsBySubject:function(e,t){e.searchTicketList=e.tickets.filter((function(e){return t.payload?e.subject.toLowerCase().includes(t.payload.toLowerCase()):e}))},searchTicketsById:function(e,t){e.searchTicketList=e.tickets.filter((function(e){return t.payload?e._id.toLowerCase().includes(t.payload.toLowerCase()):e}))},fetchSingleTicketLoading:function(e){e.isLoading=!0},fetchSingleTicketSuccess:function(e,t){e.selectedTicket=t.payload,e.isLoading=!1,e.error=""},fetchSingleTicketFailure:function(e,t){e.isLoading=!1,e.error=t.payload},replyTicketLoading:function(e){e.isLoading=!0},replyTicketSuccess:function(e,t){e.isLoading=!1,e.error="",e.replyMsg=t.payload},replyTicketFailure:function(e,t){e.isLoading=!1,e.replyTicketError=t.payload},closeTicketLoading:function(e){e.isLoading=!0},closeTicketSuccess:function(e,t){e.isLoading=!1,e.error="",e.replyMsg=t.payload},closeTicketFailure:function(e,t){e.isLoading=!1,e.error=t.payload}}}),ge=Ee.reducer,fe=Ee.actions,he=fe.fetchTicketLoading,be=fe.fetchTicketSuccess,ve=fe.fetchTicketFailure,ke=fe.resetReplyMsg,we=fe.searchTicketsBySubject,xe=(fe.searchTicketsByOwner,fe.searchTicketsById),ye=fe.fetchSingleTicketLoading,je=fe.fetchSingleTicketSuccess,Se=fe.fetchSingleTicketFailure,Oe=fe.replyTicketLoading,Le=fe.replyTicketSuccess,Te=fe.replyTicketFailure,Ne=fe.closeTicketLoading,Ce=fe.closeTicketSuccess,Pe=fe.closeTicketFailure,Ae=ge,Re=function(e){return new Promise(function(){var t=Object(i.a)(o.a.mark((function t(a,n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.get("/v1/ticket/"+e,{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:r=t.sent,a(r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n("Error at getSingleTicket / "+t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}())},Fe=function(e,t){return new Promise(function(){var a=Object(i.a)(o.a.mark((function a(n,r){var c;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,C.a.put("/v1/ticket/"+e,t,{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:c=a.sent,n(c.data),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),r("Error at addReplyToTicket / "+a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}())},Ie=function(e){return new Promise(function(){var t=Object(i.a)(o.a.mark((function t(a,n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.patch("/v1/ticket/close-ticket/"+e,{},{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:r=t.sent,a(r.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n("Error at updateTicketStatusClosed / "+t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}())},Je=function(e){return new Promise(function(){var t=Object(i.a)(o.a.mark((function t(a,n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.post("/v1/ticket/",e,{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:r=t.sent,a(r.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.message),n("Error at createNewTicket / "+t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}())},De=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(ye()),t.prev=1,t.next=4,Re(e);case 4:n=t.sent,a(je(n.data.result)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a(Se("Error at fetchSingleTicket / "+t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},Ue=a(119),We=a(121),Be={logo:{marginLeft:"8px",paddingTop:".5rem",paddingBottom:".5rem",paddingLeft:".5rem",paddingRight:".5rem",borderRadius:"0.1rem",boxShadow:"0px 0px 15px -7px black"},linkStyle:{color:"white",textDecoration:"none",marginLeft:"10px",marginRight:"10px"}},qe=function(){return r.a.createElement(Ue.a,{collapseOnSelect:!0,bg:"dark",variant:"dark",expand:"md"},r.a.createElement(Ue.a.Brand,{style:Be.logo},r.a.createElement("h2",null,"Ticket Tracker")),r.a.createElement(Ue.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(Ue.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(We.a,{style:Be.linkPosition},r.a.createElement(m.Link,{to:"/dashboard",style:Be.linkStyle,onClick:"window.location.reload"},"Dashboard"),r.a.createElement(m.Link,{to:"/add-ticket",style:Be.linkStyle},"Add Ticket"),r.a.createElement(m.Link,{to:"/open-tickets",style:Be.linkStyle},"Open Tickets"),r.a.createElement(m.Link,{to:"/closed-tickets",style:Be.linkStyle},"Closed Tickets"),r.a.createElement(m.Link,{to:"/",onClick:function(){localStorage.removeItem("crmSite"),sessionStorage.removeItem("accessJWT")},style:Be.linkStyle},"Logout"))))},Ge=function(e){var t=e.children;return r.a.createElement("div",{className:"default-layout"},r.a.createElement("header",{className:"header"},r.a.createElement(qe,null)),r.a.createElement("main",{className:"main"},t))},_e=function(){var e=Object(T.b)(),t=Object(T.c)((function(e){return e.tickets})).tickets,a=t.length,c=t.filter((function(e){return"open"===e.status}));return Object(n.useEffect)((function(){t.length||e(function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(he()),e.prev=1,e.next=4,new Promise(function(){var e=Object(i.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("/v1/ticket/all-tickets/",{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:n=e.sent,t(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a("Error at getAllTickets / "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}());case 4:(a=e.sent).data.result.length&&t(be(a.data.result)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(ve("Error at fetchAllTickets / "+e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[t,e]),r.a.createElement(Ge,null,r.a.createElement(p.a,null,r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement(pe,{page:"Dashboard"}))),r.a.createElement(E.a,null,r.a.createElement(g.a,{className:"text-center mt-5 mb-2"},r.a.createElement(m.Link,{to:"/add-ticket"},r.a.createElement(b.a,{variant:"primary",style:{fontSize:"2rem",padding:"10px 30px",color:"white"}},"Add New Ticket")))),r.a.createElement(E.a,null,r.a.createElement(g.a,{className:"text-center mb-2"},r.a.createElement("h4",null,r.a.createElement("div",null,"Open Tickets: ",c.length)),r.a.createElement("div",null,"Total Tickets: ",a))),r.a.createElement(E.a,null,r.a.createElement(g.a,{className:"mt-2"},r.a.createElement("h5",null,"Recently Added Tickets"))),r.a.createElement("hr",null),r.a.createElement(E.a,null,r.a.createElement(g.a,{className:"recent-ticket"},r.a.createElement(ue,{tickets:t})))))},Me=Object(k.b)({name:"newTicket",initialState:{isLoading:!1,error:"",successMsg:""},reducers:{openNewTicketPending:function(e){e.isLoading=!0},openNewTicketSuccess:function(e,t){e.isLoading=!1,e.successMsg=t.payload},openNewTicketFailure:function(e,t){e.isLoading=!0,e.error=t.payload},resetSuccessMsg:function(e){e.isLoading=!1,e.successMsg=""}}}),ze=Me.actions,Ze=ze.openNewTicketPending,$e=ze.openNewTicketSuccess,He=ze.openNewTicketFailure,Ve=ze.resetSuccessMsg,Ye=Me.reducer,Ke=function(e){return function(t){return new Promise(function(){var a=Object(i.a)(o.a.mark((function a(n,r){var c;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t(Ze()),a.next=4,Je(e);case 4:"error"===(c=a.sent).status&&(t(He(c.message)),r(c.message)),t($e(c.message)),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0),t(He("Error at openNewTicket /"+a.t0.message));case 14:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}())}},Qe={jumbotron:{backgroundColor:"white",paddingTop:"4rem",paddingBottom:"4rem",paddingLeft:"2rem",paddingRight:"2rem",borderRadius:"0.5rem",boxShadow:"0px 0px 15px -7px black",maxWidth:"700px",marginLeft:"auto",marginRight:"auto"}},Xe={subject:"",issueDate:"",message:""},et={subject:!1,issueDate:!1,message:!1},tt=function(){var e=Object(T.b)(),t=Object(T.c)((function(e){return e.user})).user.name,a=Object(T.c)((function(e){return e.openTickets})),c=a.isLoading,s=a.error,l=a.successMsg,u=Object(n.useState)(Xe),m=Object(d.a)(u,2),p=m[0],k=m[1],w=Object(n.useState)(et),x=Object(d.a)(w,2),y=x[0],j=x[1];Object(n.useEffect)((function(){l&&e(Ve())}),[e,p,y]);var S=function(e){var t=e.target,a=t.name,n=t.value;k(Object(ne.a)(Object(ne.a)({},p),{},Object(ae.a)({},a,n)))},O=function(){var a=Object(i.a)(o.a.mark((function a(n){var r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),j(et),a.next=4,(c=p.subject).length>=3&&c.length<=175;case 4:r=a.sent,j(Object(ne.a)(Object(ne.a)({},et),{},{subject:!r})),e(Ke(Object(ne.a)(Object(ne.a)({},p),{},{sender:t})));case 7:case"end":return a.stop()}var c}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{style:Qe.jumbotron},r.a.createElement("h1",{className:"text-primary text-center"},"Add a New Ticket"),r.a.createElement("hr",null),r.a.createElement("div",null,s&&r.a.createElement(f.a,{variant:"danger"},s),l&&r.a.createElement(f.a,{variant:"primary"},l),c&&r.a.createElement(v.a,{variant:"primary",animation:"border"})),r.a.createElement(h.a,{autoComplete:"off",onSubmit:O},r.a.createElement(h.a.Group,{as:E.a},r.a.createElement(h.a.Label,{column:!0,sm:3},"Subject"),r.a.createElement(g.a,null,r.a.createElement(h.a.Control,{type:"text",name:"subject",value:p.subject,onChange:S,placeholder:"Subject",required:!0}),r.a.createElement(h.a.Text,{className:"text-danger"},y.subject&&"Subject is required."))),r.a.createElement(h.a.Group,{as:E.a,style:{marginTop:"10px"}},r.a.createElement(h.a.Label,{column:!0,sm:3},"Date"),r.a.createElement(g.a,null,r.a.createElement(h.a.Control,{type:"date",value:p.date,name:"issueDate",onChange:S,required:!0}))),r.a.createElement(h.a.Group,{as:E.a,style:{marginTop:"10px"}},r.a.createElement(h.a.Label,{column:!0,sm:3},"Issue Found"),r.a.createElement(g.a,null,r.a.createElement(h.a.Control,{as:"textarea",value:p.message,name:"message",rows:"5",onChange:S,required:!0}),r.a.createElement(h.a.Text,{className:"text-danger"},y.message&&"Subject details are required."))),r.a.createElement(b.a,{style:{marginTop:"18px",color:"white",width:"100%"},type:"submit",variant:"primary"},"Submit")))},at=function(){return r.a.createElement(Ge,null,r.a.createElement(p.a,null,r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement(pe,{page:"Add Ticket"}))),r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement(tt,null)))))},nt=function(){var e=Object(T.b)();return r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement(h.a.Group,{as:E.a},r.a.createElement(h.a.Label,{column:!0,sm:"5"},"Search By Subject:",""),r.a.createElement(g.a,{sm:"7"},r.a.createElement(h.a.Control,{name:"searchStr",type:"text",placeholder:"Search ...",onChange:function(t){var a,n=t.target.value;e((a=n,function(e){e(we(a))}))}})))))},rt=function(){var e=Object(T.b)();return r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement(h.a.Group,{as:E.a},r.a.createElement(h.a.Label,{column:!0,sm:"5"},"Search By Ticket ID:",""),r.a.createElement(g.a,{sm:"7"},r.a.createElement(h.a.Control,{name:"searchStr",type:"text",placeholder:"Search ...",onChange:function(t){var a,n=t.target.value;e((a=n,function(e){e(xe(a))}))}})))))},ct=function(){var e=Object(T.c)((function(e){return e.tickets})),t=e.searchTicketList,a=e.tickets,n=e.isLoading,c=e.error;return n?r.a.createElement("h3",null,"Loading..."):c?r.a.createElement("h3",null,c):r.a.createElement(ie.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Subject"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Opened Date"),r.a.createElement("th",null,"Ticket ID"),r.a.createElement("th",null,"Opened By"))),r.a.createElement("tbody",null,a.length?t.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement(m.Link,{to:"/ticket/".concat(e._id)},e.subject)),r.a.createElement("td",null,e.status),r.a.createElement("td",null,e.openedAt&&new Date(e.openedAt).toLocaleString()),r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.conversations[0].sender))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4",className:"text-center"},"No Tickets Exist"))))},st=function(){var e=Object(T.b)();return Object(n.useEffect)((function(){e(function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(he()),e.prev=1,e.next=4,new Promise(function(){var e=Object(i.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("/v1/ticket/all-open-tickets/",{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:n=e.sent,t(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a("Error at getAllOpenTickets / "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}());case 4:(a=e.sent).data.result.length&&t(be(a.data.result)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(ve("There are no open tickets at the moment."));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),r.a.createElement(Ge,null,r.a.createElement(p.a,null,r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement(pe,{page:"Open Tickets "}))),r.a.createElement(E.a,{className:"mt-4"},r.a.createElement(g.a,null,r.a.createElement(m.Link,{to:"/add-ticket"},r.a.createElement(b.a,{variant:"primary",style:{color:"white"}},"Add New Ticket"))),r.a.createElement(g.a,{className:"text-right"},r.a.createElement(nt,null)),r.a.createElement(g.a,{className:"text-right"},r.a.createElement(rt,null))),r.a.createElement("hr",null),r.a.createElement(g.a,null,r.a.createElement(ct,null))))},lt=function(){var e=Object(T.b)();return Object(n.useEffect)((function(){e(function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(he()),e.prev=1,e.next=4,new Promise(function(){var e=Object(i.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("/v1/ticket/all-closed-tickets/",{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:n=e.sent,t(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a("Error at getAllClosedTickets / "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}());case 4:(a=e.sent).data.result.length&&t(be(a.data.result)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(ve("There are no closed tickets at the moment."));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),r.a.createElement(Ge,null,r.a.createElement(p.a,null,r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement(pe,{page:"Closed Tickets "}))),r.a.createElement(E.a,{className:"mt-4"},r.a.createElement(g.a,null,r.a.createElement(m.Link,{to:"/add-ticket"},r.a.createElement(b.a,{variant:"primary",style:{color:"white"}},"Add New Ticket"))),r.a.createElement(g.a,{className:"text-right"},r.a.createElement(nt,null)),r.a.createElement(g.a,{className:"text-right"},r.a.createElement(rt,null))),r.a.createElement("hr",null),r.a.createElement(g.a,null,r.a.createElement(ct,null))))},ot=(a(107),function(e){var t=e.msg;return!t&&(t=[]),t.map((function(e,t){return r.a.createElement("div",{key:t,className:"message-history mt-3"},r.a.createElement("div",{className:"send text-secondary"},r.a.createElement("div",{className:"sender"},e.sender),r.a.createElement("div",{className:"date"},e.msgAt&&new Date(e.msgAt).toLocaleString())),r.a.createElement("div",{className:"message"},e.message))}))}),it=function(e){var t=e._id,a=Object(T.b)(),c=Object(T.c)((function(e){return e.user})).user.name,s=Object(n.useState)(""),l=Object(d.a)(s,2),u=l[0],m=l[1];return r.a.createElement("div",null,r.a.createElement(h.a,{onSubmit:function(e){e.preventDefault(),a(function(e,t){return function(){var a=Object(i.a)(o.a.mark((function a(n){var r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(Oe()),a.prev=1,a.next=4,Fe(e,t);case 4:if("error"!==(r=a.sent).status){a.next=7;break}return a.abrupt("return",n(Te("Error at replyToTicket / "+r.message)));case 7:n(De(e)),n(Le(r.message)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),n(Te("Error at replyToTicket / "+a.t0.message));case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()}(t,{message:u,sender:c})),m("")}},r.a.createElement(h.a.Label,null,"Reply"),r.a.createElement("div",null,r.a.createElement(h.a.Text,null,"Add your message here.")),r.a.createElement(h.a.Control,{value:u,onChange:function(e){m(e.target.value)},as:"textarea",row:"5",name:"detail"}),r.a.createElement("div",{className:"text-end mt-2 mb-2"},r.a.createElement(b.a,{variant:"primary",type:"submit"},"Reply"))))},ut=function(){var e=Object(u.x)().tId,t=Object(T.b)(),a=Object(T.c)((function(e){return e.tickets})),c=a.isLoading,s=a.error,l=a.selectedTicket,m=a.replyMsg,d=a.replyTicketError;return Object(n.useEffect)((function(){t(De(e)),m&&t(ke())}),[e,t]),r.a.createElement(Ge,null,r.a.createElement(p.a,null,r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement(pe,{page:"Ticket Search"}))),r.a.createElement(E.a,null,r.a.createElement(g.a,null,c&&r.a.createElement(v.a,{variant:"info",animation:"border"}),s&&r.a.createElement(f.a,{variant:"danger"},s),d&&r.a.createElement(f.a,{variant:"danger"},d),m&&r.a.createElement(f.a,{variant:"success"},m))),r.a.createElement(E.a,null,r.a.createElement(g.a,{className:"text-secondary"},r.a.createElement("div",{className:"subject"},"Subject: ",l.subject),r.a.createElement("div",{className:"date"},"Ticket Opened: ",l.openedAt&&new Date(l.openedAt).toLocaleString()),r.a.createElement("div",{className:"status"},"Status: ",l.status)),r.a.createElement(g.a,{className:"text-right"},r.a.createElement(b.a,{variant:"outline-info",onClick:function(){return t((a=e,function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ne()),e.prev=1,e.next=4,Ie(a);case 4:if("error"!==(n=e.sent).status){e.next=7;break}return e.abrupt("return",t(Pe("Error at updateTicketStatusClosed / "+n.message)));case 7:t(De(a)),t(Ce(n.message)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t(Pe("Error at updateTicketStatusClosed / "+e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()));var a},disabled:"closed"===l.status},"Close Ticket"))),r.a.createElement(E.a,{className:"mt-4"},r.a.createElement(g.a,null,l.conversations&&r.a.createElement(ot,{msg:l.conversations}))),r.a.createElement("hr",null),r.a.createElement(E.a,{className:"mt-4"},r.a.createElement(g.a,null,r.a.createElement(it,{_id:e})))))},mt=Object(k.b)({name:"userRegistration",initialState:{isLoading:!1,status:"",message:""},reducers:{registrationPending:function(e){e.isLoading=!0},registrationSuccess:function(e,t){e.isLoading=!1,e.status="success",e.message=t.payload},registrationFailure:function(e,t){e.isLoading=!1,e.status="error",e.message=t.payload}}}),dt=mt.reducer,pt=mt.actions,Et=pt.registrationPending,gt=pt.registrationSuccess,ft=pt.registrationFailure,ht=dt,bt={name:"",phone:"",email:"",company:"",password:"",confirmPassword:""},vt={isLongEnough:!1,hasUpperCase:!1,hasLowerCase:!1,hasNumber:!1,hasSpecial:!1,confirmPassword:!1},kt=function(){var e=Object(T.b)(),t=Object(n.useState)(bt),a=Object(d.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(vt),u=Object(d.a)(l,2),m=u[0],k=u[1],w=Object(T.c)((function(e){return e.registration})),x=w.isLoading,y=w.status,j=w.message;Object(n.useEffect)((function(){}),[c]);var S=function(e){var t=e.target,a=t.name,n=t.value;if(s(Object(ne.a)(Object(ne.a)({},c),{},Object(ae.a)({},a,n))),"password"===a){var r=n.length>=8,l=/[A-Z]/.test(n),o=/[a-z]/.test(n),i=/[0-9]/.test(n),u=/[ !,",#,$,%,&,',(,),*,+,-,.,/,:,;,<,=,>,?,@,[,^,_,`,{,|,} ]/.test(n);k(Object(ne.a)(Object(ne.a)({},m),{},{isLongEnough:r,hasUpperCase:l,hasLowerCase:o,hasNumber:i,hasSpecial:u}))}"confirmPassword"===a&&k(Object(ne.a)(Object(ne.a)({},m),{},{confirmPassword:c.password===n}))};return r.a.createElement(p.a,null,r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement("h1",{className:"text-primary"},"User Registration"))),r.a.createElement("hr",null),r.a.createElement(E.a,null,r.a.createElement(g.a,null,j&&r.a.createElement(f.a,{variant:"success"===y?"success":"danger"},j))),r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement(h.a,{onSubmit:function(t){var a;t.preventDefault(),e((a=c,function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Et()),e.prev=1,e.next=4,P(a);case 4:"success"===(n=e.sent).status?t(gt(n.message)):t(ft(n.message)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t(ft(e.t0.message)),console.log("Error at userRegistration / "+e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()))}},r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement(h.a.Group,{className:"mb-3"},r.a.createElement(h.a.Label,null,"Full Name"),r.a.createElement(h.a.Control,{type:"text",name:"name",value:c.name,onChange:S,placeholder:"Your Name"}))),r.a.createElement(g.a,null,r.a.createElement(h.a.Group,{className:"mb-3"},r.a.createElement(h.a.Label,null,"Phone Number"),r.a.createElement(h.a.Control,{type:"phoneNumber",name:"phone",value:c.phone,onChange:S,placeholder:"Phone Number"})))),r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement(h.a.Group,{className:"mb-3"},r.a.createElement(h.a.Label,null,"Email Address"),r.a.createElement(h.a.Control,{type:"email",name:"email",value:c.email,onChange:S,placeholder:"Enter Email"}))),r.a.createElement(g.a,null,r.a.createElement(h.a.Group,{className:"mb-3"},r.a.createElement(h.a.Label,null,"Company Name"),r.a.createElement(h.a.Control,{type:"text",name:"company",value:c.company,onChange:S,placeholder:"Company Name"})))),r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement(h.a.Group,{className:"mb-3"},r.a.createElement(h.a.Label,null,"Password"),r.a.createElement(h.a.Control,{type:"password",name:"password",value:c.password,onChange:S,placeholder:"Password"}))),r.a.createElement(g.a,null,r.a.createElement(h.a.Group,{className:"mb-3"},r.a.createElement(h.a.Label,null,"Confirm Password"),r.a.createElement(h.a.Control,{type:"password",name:"confirmPassword",value:c.confirmPassword,onChange:S,placeholder:"Confirm Password"})))),r.a.createElement("div",{className:"mb-2"},r.a.createElement("div",{className:"mb-2 text-center"},"Password Requirements:"),r.a.createElement("div",{className:"text-center"},r.a.createElement("div",{className:m.isLongEnough?"text-success":"text-danger"},"At least 8 characters ","",m.isLongEnough?r.a.createElement(r.a.Fragment,null,"\u2713"):""),r.a.createElement("div",{className:m.hasUpperCase?"text-success":"text-danger"},"At least one upper case letter ","",m.hasUpperCase?r.a.createElement(r.a.Fragment,null,"\u2713"):""),r.a.createElement("div",{className:m.hasLowerCase?"text-success":"text-danger"},"At least one lower case letter ","",m.hasLowerCase?r.a.createElement(r.a.Fragment,null,"\u2713"):""),r.a.createElement("div",{className:m.hasNumber?"text-success":"text-danger"},"At least one number ","",m.hasNumber?r.a.createElement(r.a.Fragment,null,"\u2713"):""),r.a.createElement("div",{className:m.hasSpecial?"text-success":"text-danger"},"At least one special character ","",m.hasSpecial?r.a.createElement(r.a.Fragment,null,"\u2713"):""),r.a.createElement("div",{className:m.confirmPassword?"text-success":"text-danger"},"Passwords match ","",m.confirmPassword?r.a.createElement(r.a.Fragment,null,"\u2713"):""))),r.a.createElement("div",{className:"text-center"},r.a.createElement(b.a,{variant:"primary",type:"submit",disabled:Object.values(m).includes(!1)},"Submit")),x&&r.a.createElement(v.a,{animation:"border",variant:"primary"})))),r.a.createElement(E.a,{className:"py-3 text-center"},r.a.createElement(g.a,null,"Already have an account? ","",r.a.createElement("a",{href:"/"},"Login"))))},wt=(a(108),{jumbotron:{backgroundColor:"white",paddingTop:"4rem",paddingBottom:"4rem",paddingLeft:"2rem",paddingRight:"2rem",borderRadius:"0.5rem",boxShadow:"0px 0px 15px -7px black"}}),xt=function(){return r.a.createElement("div",{className:"registration-page bg-dark"},r.a.createElement("div",{style:wt.jumbotron},r.a.createElement(kt,null)))},yt=(a(109),{jumbotron:{backgroundColor:"white",paddingTop:"4rem",paddingBottom:"4rem",paddingLeft:"2rem",paddingRight:"2rem",borderRadius:"0.5rem",boxShadow:"0px 0px 15px -7px black"}}),jt={status:"",message:""},St=function(){var e=Object(u.x)(),t={_id:e._id,email:e.email},a=Object(n.useState)(jt),c=Object(d.a)(a,2),s=c[0],l=c[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(i.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:a=e.sent,l(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!s.status&&e()}),[s]),r.a.createElement("div",{className:"entry-page bg-info"},r.a.createElement("div",{style:yt.jumbotron},!s.status&&r.a.createElement(v.a,{variant:"info",animation:"border"}),s.status&&r.a.createElement(f.a,{variant:"success"===s.status?"success":"danger"},s.message),r.a.createElement("div",null,r.a.createElement("a",{href:"/",style:{display:"flex",justifyContent:"center"}},"Login"))))};var Ot=function(){var e=function(e){var t=e.children,a=Object(T.b)(),c=Object(T.c)((function(e){return e.login})).isAuth,s=Object(T.c)((function(e){return e.user})).user;return Object(n.useEffect)((function(){var e=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(){var e=Object(i.a)(o.a.mark((function e(t,a){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=JSON.parse(localStorage.getItem("crmSite")),(r=n.refreshJWT)||a("Token not found!"),e.next=5,C.a.get("/v1/tokens",{headers:{Authorization:r}});case 5:"success"===(c=e.sent).data.status&&sessionStorage.setItem("accessJWT",c.data.accessJWT),t(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),"Request failed with status code 403"===e.t0.message&&localStorage.removeItem("crmSite"),a(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}());case 2:e.sent&&a(S());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!sessionStorage.getItem("accessJWT")&&localStorage.getItem("crmSite")&&e(),!c&&sessionStorage.getItem("accessJWT")&&a(S()),s._id||a(q())}),[a,c,s._id]),c?t:r.a.createElement(u.b,{to:"/"})};return r.a.createElement("div",{className:"App"},r.a.createElement(m.BrowserRouter,null,r.a.createElement(u.f,null,r.a.createElement(u.d,{path:"/",element:r.a.createElement(te,null)}),r.a.createElement(u.d,{path:"/registration",element:r.a.createElement(xt,null)}),r.a.createElement(u.d,{path:"/verification/:_id/:email",element:r.a.createElement(St,null)}),r.a.createElement(u.d,{path:"/password-reset",element:r.a.createElement(oe,null)}),r.a.createElement(u.d,{path:"/dashboard",element:r.a.createElement(e,null,r.a.createElement(_e,null))}),r.a.createElement(u.d,{path:"/add-ticket",element:r.a.createElement(e,null,r.a.createElement(at,null))}),r.a.createElement(u.d,{path:"/open-tickets",element:r.a.createElement(e,null,r.a.createElement(st,null))}),r.a.createElement(u.d,{path:"/closed-tickets",element:r.a.createElement(e,null,r.a.createElement(lt,null))}),r.a.createElement(u.d,{path:"/ticket/:tId",element:r.a.createElement(e,null,r.a.createElement(ut,null))}))))},Lt=(a(110),Object(k.a)({reducer:{tickets:Ae,login:L,user:B,openTickets:Ye,registration:ht,password:Y}}));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T.a,{store:Lt},r.a.createElement(Ot,null))),document.getElementById("root"))},69:function(e,t,a){e.exports=a(111)},74:function(e,t,a){},76:function(e,t,a){}},[[69,1,2]]]);
//# sourceMappingURL=main.265aa481.chunk.js.map